# Инициализация системы. Systemd

## Задание: "Systemd - создание unit-файла"

### Цель: "Научиться редактировать существующие и создавать новые unit-файлы"

#### Написать service, который будет раз в 30 секунд мониторить лог на предмет наличия ключевого слова

- Cоздаём файл с конфигурацией для сервиса в директории /etc/default
  ![](images/img1.png)
- Cоздаем /var/log/watchlog.log и пишем туда строки на своё усмотрение,
  плюс ключевое слово ‘ALERT’
  ![](images/img2.png)
- Создадим скрипт. Добавим права на запуск файла
  ![](images/img3.png)
- Создадим юнит для сервиса
  ![](images/img4.png)
- Создадим юнит для таймера
  ![](images/img5.png)
- Проверка работы таймера
  ![](images/img6.png)

#### Установить spawn-fcgi и создать unit-файл (spawn-fcgi.sevice) с помощью переделки init-скрипта

- Cоздаём файл с настройками для будущего сервиса в файле /etc/spawn-fcgi/fcgi.conf
  ![](images/img7.png)
- Cоздаём unit
  ![](images/img8.png)
- Смотрим результат
  ![](images/img9.png)

#### Доработать unit-файл Nginx (nginx.service) для запуска нескольких инстансов сервера с разными конфигурационными файлами одновременно

- Cоздадим новый Unit
  ![](images/img10.png)
- Создаём конфиги для Nginx
  ![](images/img11-1.png)
  ![](images/img11-2.png)
- Запускаем серверы, смотрим результат
  ![](images/img12.png)
